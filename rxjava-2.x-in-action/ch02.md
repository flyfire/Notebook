## RxJava基础知识

RxJava的使用通常需要三步

+ 创建Observable，Observable的字面意思是被观察者，使用RxJava时需要创建一个被观察者，它会决定什么时候触发事件以及触发怎样的事件。
+ 创建Observer，Observer即观察者，它可以在不同的线程中执行任务。
+ 使用subscribe()进行订阅。

``Action``无参数类型，``Consumer``单一参数类型。

RxJava2.x的五种观察者模式

+ ``Observable``和``Observer``
+ ``Flowable``和``Subscriber``
+ ``Single``和``SingleObserver``
+ ``Complete``和``CompletableObserver``
+ ``Maybe``和``MaybeObserver``

| 类型 | 描述 |
| Observable | 能够发射0或n个数据，并以成功或错误事件终止 |
| Flowable | 能够发射0或n个数据，并以成功或错误事件终止。支持背压，可以控制数据源发射的速度 |
| Single | 只发射单个数据或错误事件 |
| Completable | 从来不发射数据，只处理onComplete和onError事件。可以看成Rx的Runnable |
| Maybe | 能够发射0或者1个数据，要么成功，要么失败。有点类似于Optional |

do操作符可以给Observable的生命周期的各个阶段加上一系列的回调监听，当Observable执行到这个阶段时，这些回调就会被触发。

| 操作符 | 用途 |
| doOnSubscribe | 一旦观察者订阅了Observable，它就会被调用 |
| doOnLifecycle | 可以再观察者订阅之后，设置是否取消订阅 |
| doOnNext | 它产生的Observable每发射一项数据就会调用它一次，它的Consumer接受发射的数据项。一般用于在subscribe之前对数据进行处理 |
| doOnEach | 它产生的Observable没发射一项数据就会调用它一次，不仅包括onNext，还包括onError和onCompleted |
| doAfterNext | 在onNext之后执行，而doOnNext是在onNext之前执行 |
| doOnComplete | 当它产生的Observable在正常终止调用onComplete时会被调用 |
| doFinally | 在当它产生的Observable终止之后会被调用，无论是正常终止还是异常终止，doFinally优先于doAfterTerminate的调用 |
| doAfterTerminate | 注册一个Action，当Observable调用onComplete或onError时触发 |

在RxJava中，Observable有Hot和Cold之分。

+ Hot Observable无论有没有观察者进行订阅，事件始终都会发生。当Hot Observable有多个订阅者(多个观察者进行订阅时)，Hot Observable与订阅者们的关系是一对多的关系，可以与多个订阅者共享信息。
+ Cold Observable是只有观察者订阅了，才开始执行发射数据流的代码。并且Cold Obsevable和Observer只能是一对一的关系。当有多个不同的订阅者时，消息是重新完整发送的。也就是说，对Cold Observable而言，有多个Observer时，它们各自的事件是独立的。

把Hot Observable想象成一个广播电台，所有在此刻收听的听众都会听到同一首歌。而Cold Observable是一张音乐CD，人们可以独立购买并听取它。