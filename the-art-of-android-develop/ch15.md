### 15.Android性能优化

+ 布局优化，布局优化的思想很简单，就是尽量减少布局文件的层级。布局优化的另外一种手段是采用``<include>``标签，``<merge>``标签和ViewStub。``<include>``标签主要用于布局重用，``<merge>``标签一般和``<include>``配合使用，它可以降低减少布局的层级，而ViewStub则提供了按需加载的功能，当需要时才会将ViewStub中的布局加载到内存，这提高了程序的初始化效率。ViewStub继承了View，它非常轻量级且宽/高都是0，因此它本身不参与任何的布局和绘制过程。ViewStub的意义在于按需加载所需的布局文件。
+ 绘制优化是指View的onDraw方法要避免执行大量的操作，这主要体现在两个方面，首先，onDraw中不要创建新的局部对象，这是因为onDraw方法可能会被频繁调用，这样就会在一瞬间产生大量的临时对象，这不仅占用了过多的内存而且还会导致系统更加频繁gc，降低了程序的执行效率。另外一方面，onDraw方法中不要做耗时的任务，也不能执行成千上万次的循环操作，尽管每次循环都很轻量级，但是大量的循环仍然十分抢占CPU时间片，这会造成View的绘制过程不流畅。